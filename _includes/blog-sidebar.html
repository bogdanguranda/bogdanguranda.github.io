<aside class="blog-sidebar">
    <div class="sidebar-section">
        <h3>Categories</h3>
        <ul class="sidebar-nav">
            <li><a href="/blog/trading/">Trading</a></li>
            <li><a href="/blog/coding/">Coding</a></li>
            <li><a href="/blog/history/">History</a></li>
            <li><a href="/blog/books/">Books</a></li>
            <li><a href="/blog/travels/">Travels</a></li>
        </ul>
    </div>

    {% comment %}
    Collect all tags from blog posts
    {% endcomment %}
    {% assign all_tags = "" | split: "" %}
    {% assign blog_posts = site.pages | where: "layout", "blog-post" %}
    {% for post in blog_posts %}
    {% if post.tags %}
    {% for tag in post.tags %}
    {% unless all_tags contains tag %}
    {% assign all_tags = all_tags | push: tag %}
    {% endunless %}
    {% endfor %}
    {% endif %}
    {% endfor %}
    {% assign all_tags = all_tags | sort %}

    {% if all_tags.size > 0 %}
    <div class="sidebar-section">
        <h3>Tags</h3>
        <div class="tag-cloud">
            {% for tag in all_tags %}
            <a href="/blog/?tag={{ tag | slugify }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="sidebar-section">
        <h3>Recent Posts</h3>
        <ul class="recent-posts">
            {% assign recent_posts = site.pages | where: "layout", "blog-post" | sort: "date" | reverse %}
            {% assign counter = 0 %}
            {% for post in recent_posts %}
            {% if counter < 5 %} <li>
                <a href="{{ post.url }}">{{ post.title }}</a>
                {% if post.date %}
                <time>{{ post.date | date: "%b %d, %Y" }}</time>
                {% endif %}
                </li>
                {% assign counter = counter | plus: 1 %}
                {% endif %}
                {% endfor %}
        </ul>
    </div>
</aside>
