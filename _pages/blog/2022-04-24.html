---
layout: blog-post
title: Using SSH with multiple GitHub accounts
date: 2022-04-24
permalink: /blog/2022-04-24/
excerpt: A simple guide to configuring SSH for personal and work GitHub accounts without changing your gitcommands.
tags: [ssh, github, development, devops]
---

<h2>Using SSH with multiple GitHub accounts</h2>

<p>Recently I wanted to separate my personal GitHub account from my work, so I wondered how to use two GitHub accounts
    with SSH at the same time on my machine.</p>

<p>There are at least 2 different approaches to solving this issue that I have found.</p>

<p>First approach is changing the <code>~/.ssh/config</code> file to map different accounts to different hosts. The
    problem with this one is that you'll have to use custom hostnames when running git commands, e.g.</p>

<pre><code>git clone [email protected]:bogdanguranda/sokobug.git</code></pre>

<p>instead of just</p>

<pre><code>git clone [email protected]:bogdanguranda/sokobug.git</code></pre>

<p>The second approach (the one I use) is configuring git itself, which doesn't affect the way you write git commands at
    all.</p>

<h3>These are the steps:</h3>

<h4>1. Generate separate SSH keys and add to agent</h4>

<p>(Skip step if you already have them): follow the instructions in this <a
        href="https://help.github.com/en/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">guide</a>.
</p>

<h4>2. Create separate git config files (and configure SSH to use different keys)</h4>

<p>Create <code>~/.gitconfig-work</code></p>

<pre><code>[user]
	name = Bogdan Guranda
	email = [email protected]
[core]
    sshCommand = "ssh -i ~/.ssh/id_work"</code></pre>

<p>Create <code>~/.gitconfig-personal</code></p>

<pre><code>[user]
	name = Bogdan Guranda
	email = [email protected]
[core]
    sshCommand = "ssh -i ~/.ssh/id_personal"</code></pre>

<h4>3. Update <code>~/.gitconfig</code> to pick the right config based on directories</h4>

<p>We now modify our <code>~/.gitconfig</code> file to use the work account when we are inside a work related repository
    or use the personal account when we're in a personal repository:</p>

<pre><code>[includeIf "gitdir:~/projects/work/"]
    path = ~/.gitconfig-work

[includeIf "gitdir:~/projects/personal/"]
    path = ~/.gitconfig-personal</code></pre>

<h4>4. Test if the configuration works</h4>

<p>Go to each of the 2 different directories (work and personal, inside a git repo) and run:</p>

<pre><code>git config user.email</code></pre>

<p>If everything works they should print the work and personal email based on the directory you are in.</p>

<h2>Voil√†!</h2>
